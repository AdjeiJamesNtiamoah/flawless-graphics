<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Employee Portal | FLAWLESS GRAPHICS</title>
  <link rel="stylesheet" href="style.css">
  <style>
    main {
      max-width: 1000px;
      margin: 0 auto;
      padding: 30px 20px;
    }

    h2 {
      text-align: center;
      color: #1a3d6d;
      margin-bottom: 15px;
    }

    /* --- Search Bar --- */
    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
    }

    #searchBar {
      width: 70%;
      max-width: 500px;
      padding: 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 1rem;
      outline: none;
      transition: all 0.2s ease;
    }

    #searchBar:focus {
      border-color: #007bff;
      box-shadow: 0 0 5px #007bff66;
    }

    .add-btn {
      background-color: #1a3d6d;
      color: #fff;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      font-size: 1rem;
      cursor: pointer;
      transition: 0.2s;
    }

    .add-btn:hover {
      background-color: #00509e;
    }

    /* --- Table --- */
    #employeeTable {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      font-size: 14px;
    }

    #employeeTable th, #employeeTable td {
      border: 1px solid #ddd;
      padding: 10px;
      text-align: left;
    }

    #employeeTable th {
      background-color: #1a3d6d;
      color: white;
    }

    #employeeTable tr:nth-child(even) {
      background-color: #f2f2f2;
    }

    #employeeTable tr:hover {
      background-color: #e8f0ff;
    }

    button.edit-btn {
      background-color: #007bff;
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 4px;
      cursor: pointer;
    }

    button.delete-btn {
      background-color: red;
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 4px;
      cursor: pointer;
    }

    /* --- Modal --- */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0, 0, 0, 0.5);
      justify-content: center;
      align-items: center;
    }

    .modal-content {
      background-color: #fff;
      border-radius: 8px;
      padding: 25px;
      width: 90%;
      max-width: 500px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from { transform: scale(0.95); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    .modal-content h3 {
      text-align: center;
      margin-bottom: 15px;
      color: #1a3d6d;
    }

    .modal-content input {
      display: block;
      width: 90%;
      margin: 8px auto;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 1rem;
    }

    .modal-content button {
      display: block;
      margin: 10px auto;
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      font-size: 1rem;
      cursor: pointer;
    }

    .save-btn {
      background-color: #1a3d6d;
      color: white;
    }

    .save-btn:hover { background-color: #00509e; }
    .close-btn {
      background-color: #ccc;
    }

    .close-btn:hover {
      background-color: #999;
      color: white;
    }
  </style>
</head>

<body>
  <header>
    <nav>
 <img src="logo.gif" alt="FLAWLESS GRAPHICS Logo" class="logo-img">
      <h1>FLAWLESS GRAPHICS</h1>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="employee.html" class="active">Employee Portal</a></li>
        <li><a href="hr-dashboard.html">HR Dashboard</a></li>
        <li><a href="services.html">Services</a></li>
        <li><a href="contact.html">Contact</a></li>
      </ul>
    </nav>
  </header>

  <main>
   <!-- Top bar -->
<!-- Sticky Top Bar -->
<div class="top-bar">
  <input 
    type="text" 
    id="searchBar" 
    placeholder="ðŸ” Search employees by name, department, or position..." 
    onkeyup="filterEmployees()">
  
  <button class="add-btn" onclick="openModal()">+ Add Employee</button>
</div>

    <!-- Employee Table -->
    <section>
      <h2>Saved Employees</h2>
      <table id="employeeTable">
        <thead>
          <tr>
            <th>#</th>
            <th>Full Name</th>
            <th>Position</th>
            <th>Department</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Salary</th>
            <th>Hire Date</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>
  </main>

  <!-- Modal -->
  <div id="employeeModal" class="modal">
    <div class="modal-content">
      <h3 id="modalTitle">Add Employee</h3>
      <form id="employeeForm">
        <input type="text" id="name" placeholder="Full Name" required>
        <input type="text" id="position" placeholder="Position/Title" required>
        <input type="text" id="department" placeholder="Department" required>
        <input type="email" id="email" placeholder="Email" required>
        <input type="tel" id="phone" placeholder="Phone" required>
        <input type="number" id="salary" placeholder="Salary" required>
        <input type="date" id="hireDate" required>
        <button type="submit" class="save-btn">Save</button>
        <button type="button" class="close-btn" onclick="closeModal()">Cancel</button>
      </form>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', refreshTable);
    const modal = document.getElementById('employeeModal');
    const form = document.getElementById('employeeForm');
    let editIndex = null;

    function openModal(edit = false) {
      modal.style.display = 'flex';
      document.getElementById('modalTitle').innerText = edit ? 'Edit Employee' : 'Add Employee';
    }

    function closeModal() {
      modal.style.display = 'none';
      form.reset();
      editIndex = null;
    }

    form.addEventListener('submit', function(e) {
      e.preventDefault();

      const employee = {
        name: document.getElementById('name').value,
        position: document.getElementById('position').value,
        department: document.getElementById('department').value,
        email: document.getElementById('email').value,
        phone: document.getElementById('phone').value,
        salary: document.getElementById('salary').value,
        hireDate: document.getElementById('hireDate').value
      };


      if (editIndex !== null) {
        employees[editIndex] = employee;
      } else {
        employees.push(employee);
      }

      localStorage.setItem('employees', JSON.stringify(employees));
      refreshTable();
      closeModal();
    });

    function refreshTable() {
      const tableBody = document.querySelector('#employeeTable tbody');
      const employees = JSON.parse(localStorage.getItem('employees')) || [];
      tableBody.innerHTML = '';

      employees.forEach((emp, index) => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${index + 1}</td>
          <td>${emp.name}</td>
          <td>${emp.position}</td>
          <td>${emp.department}</td>
          <td>${emp.email}</td>
          <td>${emp.phone}</td>
          <td>${emp.salary}</td>
          <td>${emp.hireDate}</td>
          <td>
            <button class="edit-btn" onclick="editEmployee(${index})">Edit</button>
            <button class="delete-btn" onclick="deleteEmployee(${index})">Delete</button>
          </td>
        `;
        tableBody.appendChild(row);
      });
    }

    employees.forEach((emp, i) => {
  const row = `
    <tr>
      <td>${i + 1}</td>
      <td>${emp.fullName}</td>
      <td>${emp.position}</td>
      <td>${emp.department}</td>
      <td>${emp.email}</td>
      <td>${emp.phone}</td>
      <td>${emp.salary}</td>
      <td>${emp.hireDate}</td>
      <td>
        <img src="https://cdn-icons-png.flaticon.com/512/1159/1159633.png" 
             alt="Edit" 
             class="action-icon edit-icon" 
             data-index="${i}">
        <img src="https://cdn-icons-png.flaticon.com/512/1214/1214428.png" 
             alt="Delete" 
             class="action-icon delete-icon" 
             data-index="${i}">
      </td>
    </tr>`;
  tbody.innerHTML += row;
});

    // Handle Edit and Delete actions
setTimeout(() => {
  document.querySelectorAll(".delete-icon").forEach(icon => {
    icon.addEventListener("click", e => {
      const index = e.target.dataset.index;
      if (confirm("Are you sure you want to delete this employee?")) {
        employees.splice(index, 1);
        localStorage.setItem("employees", JSON.stringify(employees));
        alert("Employee deleted successfully!");
        e.target.closest("tr").remove(); // remove row from table
      }
    });
  });

  document.querySelectorAll(".edit-icon").forEach(icon => {
    icon.addEventListener("click", e => {
      const index = e.target.dataset.index;
      const emp = employees[index];
      alert(`Editing ${emp.fullName}`);
      // You can open an edit modal here in the next step
    });
  });
}, 100);
    
    function editEmployee(index) {
      const employees = JSON.parse(localStorage.getItem('employees')) || [];
      const emp = employees[index];
      editIndex = index;

      document.getElementById('name').value = emp.name;
      document.getElementById('position').value = emp.position;
      document.getElementById('department').value = emp.department;
      document.getElementById('email').value = emp.email;
      document.getElementById('phone').value = emp.phone;
      document.getElementById('salary').value = emp.salary;
      document.getElementById('hireDate').value = emp.hireDate;

      openModal(true);
    }

    function deleteEmployee(index) {
      const employees = JSON.parse(localStorage.getItem('employees')) || [];
      if (confirm('Are you sure you want to delete this employee?')) {
        employees.splice(index, 1);
        localStorage.setItem('employees', JSON.stringify(employees));
        refreshTable();
      }
    }

    function filterEmployees() {
      const filter = document.getElementById('searchBar').value.toLowerCase();
      const rows = document.querySelectorAll('#employeeTable tbody tr');

      rows.forEach(row => {
        const text = row.textContent.toLowerCase();
        row.style.display = text.includes(filter) ? '' : 'none';
      });
    }

    window.onclick = function(event) {
      if (event.target == modal) {
        closeModal();
      }
    }
  </script>

  <!-- ðŸ”½ Sticky shrink & glow animation scripts -->
<script>
  // Animate top bar and glowing button on scroll
  window.addEventListener('scroll', () => {
    const topBar = document.querySelector('.top-bar');
    const addBtn = document.querySelector('.add-btn');

    if (window.scrollY > 50) {
      topBar.classList.add('shrink');
      addBtn.classList.add('glow');
    } else {
      topBar.classList.remove('shrink');
      addBtn.classList.remove('glow');
    }
  });
</script>

  <script>
document.getElementById("employeeForm").addEventListener("submit", e => {
  e.preventDefault();

  const newEmployee = {
    fullName: document.getElementById("fullName").value,
    position: document.getElementById("position").value,
    department: document.getElementById("department").value,
    email: document.getElementById("email").value,
    phone: document.getElementById("phone").value,
    salary: document.getElementById("salary").value,
    hireDate: document.getElementById("hireDate").value
  };

  const employees = JSON.parse(localStorage.getItem("employees")) || [];
  employees.push(newEmployee);
  localStorage.setItem("employees", JSON.stringify(employees));

  alert("âœ… Employee saved successfully!");
  e.target.reset();

  // Dispatch event to notify HR Dashboard
  window.dispatchEvent(new Event("storage"));
});

   
document.getElementById("employeeForm").addEventListener("submit", e => {
  e.preventDefault();

  const newEmployee = {
    fullName: document.getElementById("fullName").value,
    position: document.getElementById("position").value,
    department: document.getElementById("department").value,
    email: document.getElementById("email").value,
    phone: document.getElementById("phone").value,
    salary: document.getElementById("salary").value,
    hireDate: document.getElementById("hireDate").value
  };

  const employees = JSON.parse(localStorage.getItem("employees")) || [];
  employees.push(newEmployee);
  localStorage.setItem("employees", JSON.stringify(employees));

  alert("Employee saved successfully!");
  e.target.reset();
});
</script>

</body>
</html>










