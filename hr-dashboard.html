<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HR Dashboard - FLAWLESS GRAPHICS</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <!-- HEADER -->
  <header>
    <div class="logo">
      <img src="assets/logo-main.png" alt="Flawless Graphics Logo" class="logo-img">
      <h1>FLAWLESS GRAPHICS</h1>
    </div>

    <nav>
      <ul class="nav-links">
        <li><a href="index.html">Home</a></li>
       <li><a href="employee.html">Employee Portal</a></li>
        <li><a href="hr-dashboard.html" class="active">HR Dashboard</a></li>
        <li><a href="services.html">Services</a></li>
        <li><a href="contact.html">Contact</a></li>
      </ul>
    </nav>
  </header>
<!-- Sidebar -->
<aside class="sidebar">
  <div class="sidebar-header">
    <h2>HR Dashboard</h2>
    <button class="toggle-btn" id="toggleSidebar">‚ò∞</button>
  </div>
  <nav class="sidebar-nav">
    <ul>
      <li><a href="#" data-modal="employeeModal" class="active">üë§ Employee Report</a></li>
      <li><a href="#" data-modal="attendanceModal">üïí Attendance Summary</a></li>
      <li><a href="#" data-modal="payrollModal">üí∞ Payroll Analytics</a></li>
      <li><a href="#" data-modal="performanceModal">‚≠ê Performance Overview</a></li>
    </ul>
  </nav>
</aside>

<!-- Dashboard Content -->
<div class="dashboard-content">
  <div class="card" data-modal="employeeModal">
    <h3>Employee Report</h3>
    <p>View and export all employee profiles and reports.</p>
  </div>

  <div class="card" data-modal="attendanceModal">
    <h3>Attendance Summary</h3>
    <p>Track attendance data and daily check-ins.</p>
  </div>

  <div class="card" data-modal="payrollModal">
    <h3>Payroll Analytics</h3>
    <p>Analyze payroll trends and generate salary reports.</p>
  </div>

  <div class="card" data-modal="performanceModal">
    <h3>Performance Overview</h3>
    <p>Monitor staff KPIs and performance growth.</p>
  </div>
</div>

  <!-- MAIN HR DASHBOARD CONTENT -->
<main class="dashboard">
  <div class="card-grid">
    <div class="card card-blue" data-modal="employeeModal">
      <div class="card-icon">üë§</div>
      <h3>Employee Report</h3>
      <p>View and export all employee profiles and reports.</p>
    </div>

    <div class="card card-green" data-modal="attendanceModal">
      <div class="card-icon">üìÖ</div>
      <h3>Attendance Summary</h3>
      <p>Track attendance data and daily check-ins.</p>
    </div>

    <div class="card card-gold" data-modal="payrollModal">
      <div class="card-icon">üí∞</div>
      <h3>Payroll Analytics</h3>
      <p>Analyze payroll trends and generate salary reports.</p>
    </div>

    <div class="card card-purple" data-modal="performanceModal">
      <div class="card-icon">üìà</div>
      <h3>Performance Overview</h3>
      <p>Monitor staff KPIs and performance growth.</p>
    </div>
  </div>

  <!-- Modals -->
<!-- Employee Report Modal -->
<div id="employeeModal" class="modal">
  <div class="modal-content large">
    <span class="close">&times;</span>
    <h2>Employee Report</h2>
    <p id="totalInfo" class="summary-bar"></p>
    <button onclick="generateEmployeePDF()" class="download-btn">Download Report as PDF</button>

    <div class="table-container">
      <table id="employeeTable">
        <thead>
          <tr>
            <th>#</th>
            <th>Full Name</th>
            <th>Position</th>
            <th>Department</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Salary</th>
            <th>Hire Date</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>
</div>

<!-- Attendance Summary Modal -->
<div id="attendanceModal" class="modal">
  <div class="modal-content large">
    <span class="close">&times;</span>
    <h2>Attendance Summary</h2>
    <p id="attendanceSummary" class="summary-bar"></p>
    <button onclick="generateAttendancePDF()" class="download-btn">Download Attendance (PDF)</button>

    <div class="table-container">
      <table id="attendanceTable">
        <thead>
          <tr>
            <th>#</th>
            <th>Employee</th>
            <th>Department</th>
            <th>Days Present</th>
            <th>Days Absent</th>
            <th>Attendance %</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>
</div>

<!-- Payroll Analytics Modal -->
<div id="payrollModal" class="modal">
  <div class="modal-content large">
    <span class="close">&times;</span>
    <h2>Payroll Analytics</h2>
    <p id="payrollSummary" class="summary-bar"></p>
    <button onclick="generatePayrollPDF()" class="download-btn">Download Payroll (PDF)</button>

    <div class="table-container">
      <table id="payrollTable">
        <thead>
          <tr>
            <th>#</th>
            <th>Employee</th>
            <th>Department</th>
            <th>Position</th>
            <th>Salary (‚Çµ)</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>
</div>

<!-- Performance Overview Modal -->
<div id="performanceModal" class="modal">
  <div class="modal-content large">
    <span class="close">&times;</span>
    <h2>Performance Overview</h2>
    <p id="performanceSummary" class="summary-bar"></p>
    <button onclick="generatePerformancePDF()" class="download-btn">Download Performance (PDF)</button>

    <div class="table-container">
      <table id="performanceTable">
        <thead>
          <tr>
            <th>#</th>
            <th>Employee</th>
            <th>Department</th>
            <th>Performance Rating</th>
            <th>Remarks</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>
</div>

  <div id="attendanceModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>Attendance Summary</h2>
      <p>[Attendance details and summaries will go here]</p>
    </div>
  </div>

  <div id="payrollModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>Payroll Analytics</h2>
      <p>[Payroll analytics charts and reports will go here]</p>
    </div>
  </div>

  <div id="performanceModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>Performance Overview</h2>
      <p>[Performance tracking content will go here]</p>
    </div>
  </div>
</main>

<!-- EXPANDABLE SECTIONS -->
<section id="employeeReportSection" class="hidden-section">
  <div class="section-header">
    <h2>Employee Report</h2>
    <button class="collapse-btn">√ó</button>
  </div>
  <table id="reportTable">
    <thead>
      <tr>
        <th>#</th>
        <th>Full Name</th>
        <th>Position</th>
        <th>Department</th>
        <th>Email</th>
        <th>Phone</th>
        <th>Salary</th>
        <th>Hire Date</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</section>

<section id="attendanceSection" class="hidden-section">
  <div class="section-header">
    <h2>Attendance Summary</h2>
    <button class="collapse-btn">√ó</button>
  </div>
  <p>Attendance data will appear here soon.</p>
</section>

<section id="payrollSection" class="hidden-section">
  <div class="section-header">
    <h2>Payroll Analytics</h2>
    <button class="collapse-btn">√ó</button>
  </div>
  <p>Payroll data and salary insights will appear here soon.</p>
</section>

<section id="performanceSection" class="hidden-section">
  <div class="section-header">
    <h2>Performance Overview</h2>
    <button class="collapse-btn">√ó</button>
  </div>
  <p>Performance tracking and KPIs will appear here soon.</p>
</section>


  <section id="attendanceSection" class="hidden-section">
    <h2>Attendance Summary</h2>
    <p>Attendance data will appear here soon.</p>
  </section>

  <section id="payrollSection" class="hidden-section">
    <h2>Payroll Analytics</h2>
    <p>Payroll data and salary insights will appear here soon.</p>
  </section>

  <section id="performanceSection" class="hidden-section">
    <h2>Performance Overview</h2>
    <p>Performance tracking and KPIs will appear here soon.</p>
  </section>
</main>

  <!-- FOOTER -->
  <footer>
    <p>&copy; 2025 FLAWLESS GRAPHICS | HR Management System</p>
  </footer>

  <!-- JAVASCRIPT -->
 <script>
  // Toggle visibility of each section
  function toggleSection(cardId, sectionId) {
    const card = document.getElementById(cardId);
    const section = document.getElementById(sectionId);
    const closeBtn = section.querySelector(".collapse-btn");

    card.addEventListener("click", () => {
      // Hide all other sections first
      document.querySelectorAll(".hidden-section").forEach(sec => {
        if (sec !== section) sec.classList.remove("show");
      });
      // Toggle the clicked one
      section.classList.toggle("show");
      section.scrollIntoView({ behavior: "smooth", block: "start" });
    });

    // Collapse button handler
    closeBtn.addEventListener("click", () => {
      section.classList.remove("show");
      window.scrollTo({ top: 0, behavior: "smooth" });
    });
  }

  // Activate toggles
  toggleSection("cardReport", "employeeReportSection");
  toggleSection("cardAttendance", "attendanceSection");
  toggleSection("cardPayroll", "payrollSection");
  toggleSection("cardPerformance", "performanceSection");

  // Load employee data into Employee Report
  function loadEmployeeReport() {
    const reportBody = document.querySelector("#reportTable tbody");
    reportBody.innerHTML = "";

    const employees = JSON.parse(localStorage.getItem("employees")) || [];

    if (employees.length === 0) {
      reportBody.innerHTML = `<tr><td colspan="8" style="text-align:center; color:#888;">No employee records found.</td></tr>`;
      return;
    }

    employees.forEach((emp, index) => {
      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${index + 1}</td>
        <td>${emp.name}</td>
        <td>${emp.position}</td>
        <td>${emp.department}</td>
        <td>${emp.email}</td>
        <td>${emp.phone}</td>
        <td>${emp.salary}</td>
        <td>${emp.hireDate}</td>
      `;
      reportBody.appendChild(row);
    });
  }

  document.addEventListener("DOMContentLoaded", loadEmployeeReport);
</script>
  <script>
  // Show/hide employee report
  document.querySelector('.feature-card:nth-child(1)').addEventListener('click', () => {
    const reportSection = document.getElementById('employeeReportSection');
    reportSection.classList.toggle('show');
  });

  // Load employee data
  function loadEmployeeReport() {
    const reportBody = document.querySelector('#reportTable tbody');
    reportBody.innerHTML = '';

    const employees = JSON.parse(localStorage.getItem('employees')) || [];

    if (employees.length === 0) {
      reportBody.innerHTML = `<tr><td colspan="8" style="text-align:center; color:#888;">No employee records found.</td></tr>`;
      return;
    }

    employees.forEach((emp, index) => {
      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${index + 1}</td>
        <td>${emp.name}</td>
        <td>${emp.position}</td>
        <td>${emp.department}</td>
        <td>${emp.email}</td>
        <td>${emp.phone}</td>
        <td>${emp.salary}</td>
        <td>${emp.hireDate}</td>
      `;
      reportBody.appendChild(row);
    });
  }

  // Load on page load
  document.addEventListener('DOMContentLoaded', loadEmployeeReport);

  // Update when localStorage changes
  window.addEventListener('storage', (event) => {
    if (event.key === 'employees') loadEmployeeReport();
  });
</script>

  <script>
  // Toggle visibility of each dashboard section
  function toggleSection(cardId, sectionId) {
    document.getElementById(cardId).addEventListener('click', () => {
      const section = document.getElementById(sectionId);
      section.classList.toggle('show');
      section.scrollIntoView({ behavior: 'smooth', block: 'start' });
    });
  }

  // Link each card to its section
  toggleSection('cardReport', 'employeeReportSection');
  toggleSection('cardAttendance', 'attendanceSection');
  toggleSection('cardPayroll', 'payrollSection');
  toggleSection('cardPerformance', 'performanceSection');

  // Load employee data
  function loadEmployeeReport() {
    const reportBody = document.querySelector('#reportTable tbody');
    reportBody.innerHTML = '';

    const employees = JSON.parse(localStorage.getItem('employees')) || [];

    if (employees.length === 0) {
      reportBody.innerHTML = `<tr><td colspan="8" style="text-align:center; color:#888;">No employee records found.</td></tr>`;
      return;
    }

    employees.forEach((emp, index) => {
      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${index + 1}</td>
        <td>${emp.name}</td>
        <td>${emp.position}</td>
        <td>${emp.department}</td>
        <td>${emp.email}</td>
        <td>${emp.phone}</td>
        <td>${emp.salary}</td>
        <td>${emp.hireDate}</td>
      `;
      reportBody.appendChild(row);
    });
  }

  // Load data when dashboard opens
  document.addEventListener('DOMContentLoaded', loadEmployeeReport);
</script>
  
  <script>
document.addEventListener('DOMContentLoaded', () => {
  const modals = document.querySelectorAll('.modal');
  const closeBtns = document.querySelectorAll('.close');
  const cards = document.querySelectorAll('.card');

  // Open modal when clicking card
  cards.forEach(card => {
    card.addEventListener('click', () => {
      const modalId = card.getAttribute('data-modal');
      document.getElementById(modalId).style.display = 'block';

      // Load employee data dynamically if Employee Report modal
      if (modalId === 'employeeModal') {
        const tbody = document.querySelector('#employeeTable tbody');
        tbody.innerHTML = '';
        const employees = JSON.parse(localStorage.getItem('employees')) || [];
        employees.forEach((emp, i) => {
          const row = `<tr>
            <td>${i + 1}</td>
            <td>${emp.fullName}</td>
            <td>${emp.position}</td>
            <td>${emp.department}</td>
            <td>${emp.email}</td>
            <td>${emp.phone}</td>
            <td>${emp.salary}</td>
            <td>${emp.hireDate}</td>
          </tr>`;
          tbody.innerHTML += row;
        });
      }
    });
  });

  // Close modal when clicking X
  closeBtns.forEach(btn => {
    btn.addEventListener('click', () => {
      modals.forEach(modal => (modal.style.display = 'none'));
    });
  });

  // Close modal when clicking outside content
  window.onclick = function (event) {
    modals.forEach(modal => {
      if (event.target === modal) modal.style.display = 'none';
    });
  };
});
</script>

<!-- jsPDF CDN for generating PDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
document.getElementById('downloadPDF').addEventListener('click', () => {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();

  doc.setFontSize(16);
  doc.text('Employee Report', 14, 20);
  doc.setFontSize(12);
  doc.text('Generated on: ' + new Date().toLocaleString(), 14, 28);

  const employees = JSON.parse(localStorage.getItem('employees')) || [];

  if (employees.length === 0) {
    doc.text('No employee records available.', 14, 40);
  } else {
    let startY = 40;
    const lineHeight = 10;

    // Table Header
    doc.setFont(undefined, 'bold');
    doc.text('No.', 14, startY);
    doc.text('Name', 25, startY);
    doc.text('Position', 70, startY);
    doc.text('Dept.', 110, startY);
    doc.text('Salary', 150, startY);
    doc.setFont(undefined, 'normal');

    // Employee Data
    employees.forEach((emp, i) => {
      startY += lineHeight;
      doc.text(String(i + 1), 14, startY);
      doc.text(emp.fullName || '', 25, startY);
      doc.text(emp.position || '', 70, startY);
      doc.text(emp.department || '', 110, startY);
      doc.text(emp.salary || '', 150, startY);
    });
  }

  // Save file
  doc.save('Employee_Report.pdf');
});
</script>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const employeeCard = document.querySelector('[data-modal="employeeModal"]');
  const modal = document.getElementById('employeeModal');
  const closeBtn = modal.querySelector('.close');
  const totalInfo = document.getElementById('totalInfo');
  const tableBody = document.querySelector('#employeeTable tbody');

  // Open modal when Employee Report card is clicked
  employeeCard.addEventListener('click', () => {
    modal.style.display = 'block';
    loadEmployeeReport();
  });

  // Close modal
  closeBtn.addEventListener('click', () => {
    modal.style.display = 'none';
  });
  window.addEventListener('click', (e) => {
    if (e.target === modal) modal.style.display = 'none';
  });

  // Auto-refresh every few seconds
  setInterval(() => {
    if (modal.style.display === 'block') loadEmployeeReport();
  }, 3000);

  // Storage listener for updates across tabs
  window.addEventListener('storage', (e) => {
    if (e.key === 'employees' && modal.style.display === 'block') loadEmployeeReport();
  });
});

function loadEmployeeReport() {
  const tbody = document.querySelector('#employeeTable tbody');
  const totalInfo = document.getElementById('totalInfo');
  tbody.innerHTML = '';

  const employees = JSON.parse(localStorage.getItem('employees')) || [];

  let totalSalary = 0;
  employees.forEach((emp, i) => {
    const row = document.createElement('tr');
    row.innerHTML = `
      <td>${i + 1}</td>
      <td>${emp.fullName || ''}</td>
      <td>${emp.position || ''}</td>
      <td>${emp.department || ''}</td>
      <td>${emp.email || ''}</td>
      <td>${emp.phone || ''}</td>
      <td>${emp.salary || ''}</td>
      <td>${emp.hireDate || ''}</td>
    `;
    tbody.appendChild(row);
    totalSalary += parseFloat(emp.salary) || 0;
  });

  totalInfo.innerHTML = `
    <strong>Total Employees:</strong> ${employees.length} |
    <strong>Total Payroll Cost:</strong> ‚Çµ${totalSalary.toLocaleString()}
  `;
}

function generateEmployeePDF() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();

  doc.text("Employee Report", 14, 15);
  doc.setFontSize(10);

  const employees = JSON.parse(localStorage.getItem('employees')) || [];
  let startY = 30;

  // Table Header
  doc.text("No.", 14, startY);
  doc.text("Name", 25, startY);
  doc.text("Position", 70, startY);
  doc.text("Dept.", 110, startY);
  doc.text("Salary", 150, startY);

  // Employee Data
  employees.forEach((emp, i) => {
    startY += 10;
    doc.text(String(i + 1), 14, startY);
    doc.text(emp.fullName || "", 25, startY);
    doc.text(emp.position || "", 70, startY);
    doc.text(emp.department || "", 110, startY);
    doc.text(emp.salary || "", 150, startY);
  });

  doc.save("Employee_Report.pdf");
}
</script>

  <script>
document.addEventListener('DOMContentLoaded', () => {
  const modals = {
    attendance: document.getElementById('attendanceModal'),
    payroll: document.getElementById('payrollModal'),
    performance: document.getElementById('performanceModal'),
  };

  const cards = {
    attendance: document.querySelector('[data-modal="attendanceModal"]'),
    payroll: document.querySelector('[data-modal="payrollModal"]'),
    performance: document.querySelector('[data-modal="performanceModal"]'),
  };

  const closeBtns = document.querySelectorAll('.modal .close');

  // Open modals when cards are clicked
  cards.attendance?.addEventListener('click', () => openModal('attendance'));
  cards.payroll?.addEventListener('click', () => openModal('payroll'));
  cards.performance?.addEventListener('click', () => openModal('performance'));

  // Close modals when clicking X or outside
  closeBtns.forEach(btn => {
    btn.addEventListener('click', () => btn.closest('.modal').style.display = 'none');
  });
  window.onclick = (e) => {
    Object.values(modals).forEach(modal => {
      if (e.target === modal) modal.style.display = 'none';
    });
  };
});

function openModal(type) {
  const employees = JSON.parse(localStorage.getItem('employees')) || [];
  const modal = document.getElementById(`${type}Modal`);
  const tbody = modal.querySelector('tbody');
  tbody.innerHTML = '';

  if (type === 'attendance') {
    let totalPresent = 0, totalAbsent = 0;
    employees.forEach((emp, i) => {
      const present = Math.floor(Math.random() * 22);
      const absent = 22 - present;
      totalPresent += present;
      totalAbsent += absent;
      const percent = ((present / 22) * 100).toFixed(1);
      const row = `
        <tr>
          <td>${i + 1}</td>
          <td>${emp.fullName}</td>
          <td>${emp.department}</td>
          <td>${present}</td>
          <td>${absent}</td>
          <td>${percent}%</td>
        </tr>`;
      tbody.innerHTML += row;
    });
    document.getElementById('attendanceSummary').innerHTML =
      `<strong>Total Employees:</strong> ${employees.length} |
       <strong>Avg Attendance:</strong> ${(totalPresent / (employees.length * 22) * 100 || 0).toFixed(1)}%`;
  }

  if (type === 'payroll') {
    let total = 0;
    employees.forEach((emp, i) => {
      const salary = parseFloat(emp.salary) || 0;
      total += salary;
      tbody.innerHTML += `
        <tr>
          <td>${i + 1}</td>
          <td>${emp.fullName}</td>
          <td>${emp.department}</td>
          <td>${emp.position}</td>
          <td>${salary.toLocaleString()}</td>
        </tr>`;
    });
    const avg = total / (employees.length || 1);
    document.getElementById('payrollSummary').innerHTML =
      `<strong>Total Employees:</strong> ${employees.length} |
       <strong>Total Payroll:</strong> ‚Çµ${total.toLocaleString()} |
       <strong>Average Salary:</strong> ‚Çµ${avg.toLocaleString()}`;
  }

  if (type === 'performance') {
    const ratings = ['Excellent', 'Good', 'Average', 'Needs Improvement'];
    employees.forEach((emp, i) => {
      const rating = ratings[Math.floor(Math.random() * ratings.length)];
      const remarks = rating === 'Excellent' ? 'Outstanding performance' :
                      rating === 'Good' ? 'Reliable employee' :
                      rating === 'Average' ? 'Consistent work' :
                      'Needs closer supervision';
      tbody.innerHTML += `
        <tr>
          <td>${i + 1}</td>
          <td>${emp.fullName}</td>
          <td>${emp.department}</td>
          <td>${rating}</td>
          <td>${remarks}</td>
        </tr>`;
    });
    document.getElementById('performanceSummary').innerHTML =
      `<strong>Report Generated:</strong> ${new Date().toLocaleDateString()}`;
  }

  modal.style.display = 'block';
}

function generateAttendancePDF() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  doc.text("Attendance Summary", 14, 15);
  doc.save("Attendance_Report.pdf");
}
function generatePayrollPDF() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  doc.text("Payroll Analytics", 14, 15);
  doc.save("Payroll_Report.pdf");
}
function generatePerformancePDF() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  doc.text("Performance Overview", 14, 15);
  doc.save("Performance_Report.pdf");
}
</script>
  <script>
document.addEventListener('DOMContentLoaded', () => {
  const sidebarLinks = document.querySelectorAll('.sidebar-nav a');
  
  sidebarLinks.forEach(link => {
    link.addEventListener('click', e => {
      e.preventDefault();

      // Highlight active link
      sidebarLinks.forEach(l => l.classList.remove('active'));
      link.classList.add('active');

      // Open corresponding modal
      const modalId = link.getAttribute('data-modal');
      if (modalId) {
        const modal = document.getElementById(modalId);
        if (modal) {
          modal.style.display = 'block';
          openModal(modalId.replace('Modal', ''));
        }
      }
    });
  });
});
</script>
  <script>
document.addEventListener('DOMContentLoaded', () => {
  const sidebar = document.querySelector('.sidebar');
  const toggleBtn = document.getElementById('toggleSidebar');

  toggleBtn.addEventListener('click', () => {
    sidebar.classList.toggle('collapsed');
  });

  // For mobile
  if (window.innerWidth < 768) {
    toggleBtn.addEventListener('click', () => {
      sidebar.classList.toggle('show');
    });
  }
});
</script>

</body>
</html>


